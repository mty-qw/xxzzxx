webpackJsonp([22],{I1Lx:function(t,e){},e65D:function(t,e){},nGV4:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("GnUe");var i=s("7t+N"),o=s.n(i);const a=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;var r={data(){return{codedisabled:!1,sendcodeValue:this.$t("uc.regist.sendcode"),captchaObj:null,modal1:!1,_captchaResult:null,buttonLists:[{text:this.$t("uc.forget.resettelpwd")},{text:this.$t("uc.forget.resetemailpwd")}],changeActive:0,countdown:60,formInline:{user:"",code:"",password:"",repassword:""},ruleInline:{code:[{required:!0,message:"请输入验证码",trigger:"blur"}],password:[{required:!0,message:this.$t("uc.forget.newpwdtip"),trigger:"blur"},{type:"string",min:6,message:this.$t("uc.forget.pwdvalidate3"),trigger:"blur"}],repassword:[{validator:(t,e,s)=>{""===e?s(new Error(this.$t("uc.forget.pwdvalidate1"))):e!==this.formInline.password?s(new Error(this.$t("uc.forget.pwdvalidate2"))):s()},trigger:"blur"},{type:"string",min:6,message:this.$t("uc.forget.pwdvalidate3"),trigger:"blur"}]},key:"",code:""}},watch:{changeActive:function(t){this.$refs.formInline.resetFields()}},created:function(){this.init()},computed:{isLogin:function(){return this.$store.getters.isLogin}},methods:{init(){this.isLogin?this.$router.push("/"):this.$store.state.HeaderActiveName="1-4",this.initGtCaptcha()},initGtCaptcha(){this.$http.get(this.host+this.api.uc.captcha).then(function(t){window.initGeetest({gt:t.body.gt,challenge:t.body.challenge,offline:!t.body.success,new_captcha:t.body.new_captcha,product:"bind",width:"100%",lang:"zh_CN"},this.handler)})},handler(t){t.onReady(()=>{o()("#wait").hide()}).onSuccess(()=>{(this._captchaResult=t.getValidate())?(this.afterValidate(),a.test(this.formInline.user)&&this.emailReset()):this.$Message.error("请完成验证")}),o()("#sendCode").click(()=>{this.formInline.user;t.verify()})},emailReset(){this.modal1=!1;var t={};t.account=this.formInline.user,t.geetest_challenge=this._captchaResult.geetest_challenge,t.geetest_validate=this._captchaResult.geetest_validate,t.geetest_seccode=this._captchaResult.geetest_seccode,this.$http.post(this.host+"/uc/reset/email/code",t).then(t=>{this.countdown=60;var e=t.body;0==e.code?this.$Notice.success({title:this.$t("common.tip"),desc:e.message}):this.$Notice.error({title:this.$t("common.tip"),desc:e.message})})},afterValidate(){var t;(this.modal1=!1,a.test(this.formInline.user))?((t={}).account=this.formInline.user,t.geetest_challenge=this._captchaResult.geetest_challenge,t.geetest_validate=this._captchaResult.geetest_validate,t.geetest_seccode=this._captchaResult.geetest_seccode,this.$http.post(this.host+"/uc/reset/email/code",t).then(t=>{this.countdown=60;var e=t.body;0==e.code?this.$Notice.success({title:this.$t("common.tip"),desc:e.message}):this.$Notice.error({title:this.$t("common.tip"),desc:e.message})})):((t={}).account=this.formInline.user,t.geetest_challenge=this._captchaResult.geetest_challenge,t.geetest_validate=this._captchaResult.geetest_validate,t.geetest_seccode=this._captchaResult.geetest_seccode,this.$http.post(this.host+"/uc/mobile/reset/code",t).then(t=>{var e=t.body;0==e.code?(this.settime(),this.$Notice.success({title:this.$t("common.tip"),desc:e.message})):this.$Notice.error({title:this.$t("common.tip"),desc:e.message})}))},handleSubmit(t){this.$refs[t].validate(t=>{var e;t&&(a.test(this.formInline.user)?((e={}).account=this.formInline.user,e.code=this.formInline.code,e.mode=1,e.password=this.formInline.password,this.$http.post(this.host+"/uc/reset/login/password",e).then(t=>{this.countdown=60;var e=t.body;0==e.code?(this.$Notice.success({title:this.$t("common.tip"),desc:e.message}),this.$router.push("/login")):this.$Notice.error({title:this.$t("common.tip"),desc:e.message})})):((e={}).account=this.formInline.user,e.code=this.formInline.code,e.mode=0,e.password=this.formInline.password,this.$http.post(this.host+"/uc/reset/login/password",e).then(t=>{var e=t.body;0==e.code?(this.$Notice.success({title:this.$t("common.tip"),desc:"重置成功"}),this.$router.push("/login")):this.$Notice.error({title:this.$t("common.tip"),desc:e.message})})))})},settime(){this.sendcodeValue=this.countdown,this.codedisabled=!0;let t=setInterval(()=>{this.countdown--,this.sendcodeValue=this.countdown,this.countdown<=0&&(clearInterval(t),this.codedisabled=!1,this.sendcodeValue=this.$t("uc.regist.sendcode"),this.countdown=60)},1e3)}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login_form"},[s("div",{staticClass:"login_right"},[s("Form",{ref:"formInline",attrs:{model:t.formInline,rules:t.ruleInline,inline:""}},[s("FormItem",{staticStyle:{"text-align":"center"}},[s("ButtonGroup",[s("div",{staticClass:"tel-title"},[t._v(t._s(t.$t("uc.forget.title")))])])],1),t._v(" "),s("FormItem",{attrs:{prop:"user"}},[s("Input",{attrs:{type:"text",placeholder:t.$t("uc.login.usertip")},model:{value:t.formInline.user,callback:function(e){t.$set(t.formInline,"user",e)},expression:"formInline.user"}})],1),t._v(" "),s("FormItem",{attrs:{prop:"code"}},[s("Input",{attrs:{type:"text",placeholder:t.$t("uc.forget.smscode")},model:{value:t.formInline.code,callback:function(e){t.$set(t.formInline,"code",e)},expression:"formInline.code"}}),t._v(" "),s("input",{attrs:{id:"sendCode",type:"Button",disabled:t.codedisabled},domProps:{value:t.sendcodeValue}})],1),t._v(" "),s("FormItem",{staticClass:"password",attrs:{prop:"password"}},[s("Input",{attrs:{type:"password",placeholder:t.$t("uc.forget.newpwd")},model:{value:t.formInline.password,callback:function(e){t.$set(t.formInline,"password",e)},expression:"formInline.password"}})],1),t._v(" "),s("FormItem",{staticClass:"password",attrs:{prop:"repassword"}},[s("Input",{attrs:{type:"password",placeholder:t.$t("uc.forget.confirmpwd")},model:{value:t.formInline.repassword,callback:function(e){t.$set(t.formInline,"repassword",e)},expression:"formInline.repassword"}})],1),t._v(" "),s("FormItem",[s("Button",{staticClass:"login_btn",on:{click:function(e){return t.handleSubmit("formInline")}}},[t._v(t._s(t.$t("uc.forget.save")))])],1)],1)],1),t._v(" "),s("Modal",{attrs:{"mask-closable":!1},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[s("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("uc.regist.modaltitle")))]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("div",[s("div",{attrs:{id:"captcha"}},[s("p",{staticClass:"show",attrs:{id:"wait"}},[t._v(t._s(t.$t("uc.login.validatecodeload"))+"......")])])]),t._v(" "),s("p",{staticClass:"hide",attrs:{id:"notice"}},[t._v(t._s(t.$t("uc.login.validatemsg")))])]),t._v(" "),s("p",{attrs:{slot:"footer"},slot:"footer"})])],1)},staticRenderFns:[]};var n=s("VU/8")(r,c,!1,function(t){s("e65D"),s("I1Lx")},"data-v-bccc6892",null);e.default=n.exports}});