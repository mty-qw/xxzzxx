webpackJsonp([20],{ZyG7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data(){return{user:{},codeIsSending:!1,sendcodeValue:this.$t("uc.regist.sendcode"),countdown:60,formInline:{code:"",fundpwd:""},modal:!1,fundpwd:"",currentCoin:{},transaction:{page:0,pageSize:10,total:0},loading:!0,withdrawAdress:"",inputAddress:"",withdrawAmount:0,withdrawFee:0,withdrawOutAmount:0,coinType:"",coinList:[],tableWithdraw:[],allTableWithdraw:[]}},watch:{currentCoin:function(){this.withdrawFee=this.currentCoin.minTxFee+(this.currentCoin.maxTxFee-this.currentCoin.minTxFee)/2}},methods:{cancel(){this.modal=!1,this.formInline.code="",this.formInline.fundpwd=""},sendCode(){this.$http.post(this.host+"/uc/mobile/withdraw/code").then(t=>{var e=t.body;0==e.code?(this.settime(),this.$Notice.success({title:this.$t("common.tip"),desc:e.message})):this.$Notice.error({title:this.$t("common.tip"),desc:e.message})})},settime(){this.sendcodeValue=this.countdown,this.codeIsSending=!0;let t=setInterval(()=>{this.countdown--,this.sendcodeValue=this.countdown,this.countdown<=0&&(clearInterval(t),this.sendcodeValue=this.$t("uc.regist.sendcode"),this.countdown=60,this.codeIsSending=!1)},1e3)},changePage(t){this.transaction.page=t-1,this.getList()},onAddressChange(t){this.inputAddress=t},clearValues(){this.$refs.address&&this.$refs.address.setQuery(" "),this.withdrawAdress="",this.inputAddress="",this.withdrawAmount=0,this.withdrawOutAmount=0},getCurrentCoinRecharge(){if(""!=this.coinType){for(var t=[],e=0;e<this.allTableWithdraw.length;e++)this.allTableWithdraw[e].coin.unit==this.coinType&&t.push(this.allTableWithdraw[e]);this.tableWithdraw=t}else this.tableWithdraw=this.allTableWithdraw},ok(){if(""==this.formInline.code)return this.modal=!0,void this.$Message.error("请填写短信验证码");if(""==this.formInline.fundpwd)return this.modal=!0,void this.$Message.error(this.$t("otc.chat.msg7tip"));let t={};for(let e=0;e<this.currentCoin.addresses;e++)this.currentCoin.addresses[e].address==this.withdrawAdress&&(t.remark=this.currentCoin.addresses[e].remark);t.unit=this.currentCoin.unit,t.address=this.withdrawAdress,t.amount=this.withdrawAmount,t.fee=this.withdrawFee,t.jyPassword=this.formInline.fundpwd,t.code=this.formInline.code,this.$http.post(this.host+"/uc/withdraw/apply/code",t).then(t=>{this.fundpwd="";var e=t.body;0==e.code?(this.modal=!1,this.formInline.code="",this.formInline.fundpwd="",this.transaction.page=0,this.getList(),this.clearValues(),this.$Message.success(e.message)):this.$Message.error(e.message)})},getAddrList(){this.clearValues(),this.$http.post(this.host+"/uc/withdraw/support/coin/info").then(t=>{var e=t.body;if(0==e.code&&e.data.length>0)if(this.coinList=e.data,this.coinType){for(let t=0;t<e.data.length;t++)if(this.coinType==e.data[t].unit){this.currentCoin=e.data[t];break}}else this.currentCoin=this.coinList[0],this.coinType=this.currentCoin.unit;else this.$Message.error(e.message)})},getList(){this.loading=!0;let t={};t.page=this.transaction.page,t.pageSize=this.transaction.pageSize,this.$http.post(this.host+"/uc/withdraw/record",t).then(t=>{var e=t.body;0==e.code?(this.tableWithdraw=e.data.content,this.transaction.total=e.data.totalElements,this.transaction.page=e.data.number):this.$Message.error(e.message),this.loading=!1})},accSub(t,e){var i,s,a;try{i=t.toString().split(".")[1].length}catch(t){i=0}try{s=e.toString().split(".")[1].length}catch(t){s=0}return((t*(a=Math.pow(10,Math.max(i,s)))-e*a)/a).toFixed(i>=s?i:s)},round(t,e){for(var i=1;e>0;i*=10,e--);for(;e<0;i/=10,e++);return Math.round(t*i)/i},computerAmount(){this.withdrawOutAmount=this.round(this.accSub(this.withdrawAmount,this.withdrawFee),this.currentCoin.withdrawScale)},computerAmount2(){this.withdrawAmount=(this.withdrawAmount+"").replace(/([0-9]+\.[0-9]{6})[0-9]*/,"$1")-0,this.withdrawOutAmount=this.round(this.accSub(this.withdrawAmount,this.withdrawFee),this.currentCoin.withdrawScale)},valid(){return this.withdrawAdress=this.withdrawAdress||this.inputAddress,""==this.coinType?(this.$Message.error(this.$t("uc.finance.withdraw.symboltip")),!1):""==this.withdrawAdress?(this.$Message.error(this.$t("uc.finance.withdraw.addresstip")),!1):""==this.withdrawAmount||0==this.withdrawAmount||this.withdrawAmount-0<this.currentCoin.minAmount?(this.$Message.error(this.$t("uc.finance.withdraw.numtip2")+this.currentCoin.minAmount),!1):this.withdrawAmount-0<this.withdrawFee?(this.$Message.error(this.$t("uc.finance.withdraw.numtip3")),!1):!(""==this.withdrawFee||0==this.withdrawFee||this.withdrawFee-0>this.currentCoin.maxTxFee||this.withdrawFee-0<this.currentCoin.minTxFee)||(this.$Message.error(this.$t("uc.finance.withdraw.feetip1")+this.currentCoin.minTxFee+" , "+this.$t("uc.finance.withdraw.feetip2")+this.currentCoin.maxTxFee),!1)},apply(){if(this.valid()){this.modal=!0;let t=setInterval(()=>{this.countdown<=0&&(clearInterval(t),this.sendcodeValue=this.$t("uc.regist.sendcode"),this.codeIsSending=!1)},1e3)}},getMember(){let t=this;this.$http.post(this.host+"/uc/approve/security/setting").then(e=>{var i=e.body;0==i.code?(this.user=i.data,null==i.data.realName||""==i.data.realName?(this.$Notice.error({title:this.$t("common.tip"),desc:this.$t("otc.publishad.submittip1")}),t.$router.push("/uc/safe")):0==i.data.phoneVerified?(this.$Notice.error({title:this.$t("common.tip"),desc:this.$t("otc.publishad.submittip2")}),t.$router.push("/uc/safe")):0==i.data.fundsVerified&&(this.$Notice.error({title:this.$t("common.tip"),desc:this.$t("otc.publishad.submittip3")}),t.$router.push("/uc/safe"))):this.$Message.error(i.message)})}},created(){this.getMember(),this.$http.options.emulateJSON=!1,this.coinType=this.$route.query.name||"",this.getAddrList(),this.getList(0,10,1),console.log(this.$store.getters.member)},computed:{member:function(){return console.log(this.$store.getters.member),this.$store.getters.member},tableColumnsWithdraw(){let t=[],e=[];return this.coinList.length>0&&this.coinList.forEach(t=>{e.push({label:t.unit,value:t.unit})}),t.push({title:this.$t("uc.finance.withdraw.time"),width:180,key:"createTime"}),t.push({title:this.$t("uc.finance.withdraw.symbol"),key:"symbol",filters:e,filterMultiple:!1,filterMethod:(t,e)=>e.coin.unit===t,render:function(t,e){return t("span",e.row.coin.unit)}}),t.push({title:this.$t("uc.finance.withdraw.address"),key:"address"}),t.push({title:this.$t("uc.finance.withdraw.num"),key:"totalAmount"}),t.push({title:this.$t("uc.finance.withdraw.fee"),key:"fee"}),t.push({title:this.$t("uc.finance.withdraw.txid"),key:"transactionNumber"}),t.push({title:this.$t("uc.finance.withdraw.status"),key:"status",render:(t,e)=>{let i="";return 0==e.row.status?i=this.$t("uc.finance.withdraw.status_1"):1==e.row.status?i=this.$t("uc.finance.withdraw.status_2"):2==e.row.status?i=this.$t("uc.finance.withdraw.status_3"):3==e.row.status&&(i=this.$t("uc.finance.withdraw.status_4")),t("div",[t("p",i)])}}),t}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav-rights withdraw"},[i("div",{staticClass:"nav-right"},[i("div",{staticClass:"rightarea"},[i("section",{staticClass:"trade-groups merchant-tops"},[i("router-link",{attrs:{to:"/uc/withdraw/address"}},[t._v(t._s(t.$t("uc.finance.withdraw.addressmanager")))]),t._v(" "),i("router-link",{staticStyle:{"margin-right":"10px"},attrs:{to:"/uc/withdraw/code"}},[t._v(t._s(t.$t("uc.finance.withdraw.withdrawbycode")))])],1),t._v(" "),i("section",[i("div",{staticClass:"table-inner action-box"},[i("div",{staticClass:"action-inner"},[i("div",{staticClass:"inner-left"},[i("p",{staticClass:"describe"},[t._v(t._s(t.$t("uc.finance.withdraw.symbol")))]),t._v(" "),i("Select",{staticStyle:{width:"100px","margin-top":"14px"},attrs:{placeholder:t.$t("common.pleaseselect")},on:{"on-change":t.getAddrList},model:{value:t.coinType,callback:function(e){t.coinType=e},expression:"coinType"}},t._l(t.coinList,function(e){return i("Option",{key:e.unit,attrs:{value:e.unit}},[t._v(t._s(e.unit))])}),1)],1),t._v(" "),i("div",{staticClass:"inner-box"},[i("div",{staticClass:"form-group form-address"},[i("label",{staticClass:"controlAddress describe",attrs:{for:"controlAddress"}},[t._v(t._s(t.$t("uc.finance.withdraw.address")))]),t._v(" "),i("div",{staticClass:"control-input-group"},[i("Select",{ref:"address",attrs:{filterable:"",clearable:"",placeholder:t.$t("common.pleaseselect"),noMatch:t.$t("common.nomatch")},on:{"on-query-change":t.onAddressChange},model:{value:t.withdrawAdress,callback:function(e){t.withdrawAdress=e},expression:"withdrawAdress"}},t._l(t.currentCoin.addresses,function(e){return i("Option",{key:e.address,attrs:{value:e.address}},[t._v(t._s(e.remark+"("+e.address+")"))])}),1)],1)])])]),t._v(" "),i("div",{staticClass:"form-group-container"},[i("div",{staticClass:"form-group form-amount"},[i("label",{staticClass:"label-amount"},[t._v(" "+t._s(t.$t("uc.finance.withdraw.num"))+"\n                "),i("p",{staticClass:"label-fr"},[i("span",[t._v("【"+t._s(t.$t("uc.finance.withdraw.avabalance"))+"】：\n                    "),i("span",{staticClass:"label-pointer",attrs:{id:"valueAvailable"}},[t._v(t._s(t._f("toFloor")(t.currentCoin.balance)))])]),t._v(" "),0==t.currentCoin.enableAutoWithdraw?i("span",[t._v("【"+t._s(t.$t("common.tip"))+"】："+t._s(t.$t("uc.finance.withdraw.msg1"))+" "+t._s(t.currentCoin.threshold)+" "+t._s(t.$t("uc.finance.withdraw.msg2")))]):t._e(),t._v(" "),i("span",[i("a",{staticStyle:{display:"none"},attrs:{href:"javascript:;",id:"levelUp"}},[t._v(t._s(t.$t("uc.finance.withdraw.increase")))])])])]),t._v(" "),i("div",{staticClass:"input-group"},[i("Poptip",{staticStyle:{width:"100%"},attrs:{trigger:"focus",content:t.$t("uc.finance.withdraw.tip1")+t.currentCoin.withdrawScale+t.$t("uc.finance.withdraw.tip11")+t.currentCoin.minAmount+" ,"+t.$t("uc.finance.withdraw.tip2")+t.currentCoin.maxAmount}},[i("InputNumber",{attrs:{placeholder:t.$t("uc.finance.withdraw.numtip1"),size:"large",min:t.currentCoin.minAmount,max:t.currentCoin.maxAmount},on:{"on-change":t.computerAmount},model:{value:t.withdrawAmount,callback:function(e){t.withdrawAmount=e},expression:"withdrawAmount"}}),t._v(" "),i("span",{staticClass:"input-group-addon addon-tag uppercase firstt"},[t._v(t._s(t.currentCoin.unit))])],1)],1)])]),t._v(" "),i("div",{staticClass:"form-group-container form-group-container2"},[i("div",{staticClass:"form-group form-fee"},[i("label",{staticClass:"label-amount"},[t._v(" "+t._s(t.$t("uc.finance.withdraw.fee"))+"("+t._s(t.currentCoin.unit)+")\n                ")]),t._v(" "),i("div",{staticClass:"input-group",staticStyle:{"margin-top":"30px"}},[t.currentCoin.maxTxFee>t.currentCoin.minTxFee?i("Slider",{staticStyle:{float:"left",width:"100%"},attrs:{"show-input":"",step:(t.currentCoin.maxTxFee-t.currentCoin.minTxFee)/10,max:t.currentCoin.maxTxFee,min:t.currentCoin.minTxFee},model:{value:t.withdrawFee,callback:function(e){t.withdrawFee=e},expression:"withdrawFee"}}):t._e(),t._v(" "),i("InputNumber",{attrs:{readonly:"",min:t.currentCoin.minTxFee,max:t.currentCoin.maxTxFee,size:"large"},model:{value:t.withdrawFee,callback:function(e){t.withdrawFee=e},expression:"withdrawFee"}}),t._v(" "),i("span",{staticClass:"input-group-addon addon-tag uppercase"},[t._v(t._s(t.currentCoin.unit))])],1)]),t._v(" "),i("div",{staticClass:"form-group"},[i("label",[t._v(t._s(t.$t("uc.finance.withdraw.arriamount")))]),t._v(" "),i("div",{staticClass:"input-group",staticStyle:{"margin-top":"14px",position:"relative"}},[i("InputNumber",{attrs:{readonly:"",placeholder:t.$t("uc.finance.withdraw.arriamount"),size:"large"},model:{value:t.withdrawOutAmount,callback:function(e){t.withdrawOutAmount=e},expression:"withdrawOutAmount"}}),t._v(" "),i("span",{staticClass:"input-group-addon addon-tag uppercase"},[t._v(t._s(t.currentCoin.unit))])],1)])]),t._v(" "),i("div",{staticClass:"action-foot"},[i("Button",{staticStyle:{height:"40px"},attrs:{id:"withdrawSubmit",long:"",size:"large",type:"primary"},on:{click:t.apply}},[t._v(t._s(t.$t("uc.finance.withdraw.pickup")))])],1),t._v(" "),i("div",{staticClass:"action-content pt10"},[i("div",{staticClass:"action-body"},[i("p",{staticClass:"acb-p1"},[t._v(t._s(t.$t("common.tip")))]),t._v(" "),i("p",{staticClass:"acb-p2"},[t._v("• "+t._s(t.$t("uc.finance.withdraw.msg3"))+"："+t._s(t.currentCoin.minAmount)+" "+t._s(t.coinType)+"。"),i("br"),t._v("• "+t._s(t.$t("uc.finance.withdraw.msg5"))),i("br"),t._v("• "+t._s(t.$t("uc.finance.withdraw.msg6"))+" ")])])]),t._v(" "),i("div",{staticClass:"action-content"},[i("div",{staticClass:"action-body"},[i("p",{staticClass:"acb-p1"},[t._v(t._s(t.$t("uc.finance.withdraw.record")))]),t._v(" "),i("div",{staticClass:"order-table"},[i("p",{staticClass:"acb-p2",staticStyle:{"margin-bottom":"10px"}},[t._v("• "+t._s(t.$t("uc.finance.withdraw.click"))+"\n                  "),i("i",{staticClass:"ivu-icon ivu-icon-funnel"}),t._v(t._s(t.$t("uc.finance.withdraw.filtrate")))]),t._v(" "),i("Table",{attrs:{"no-data-text":t.$t("common.nodata"),columns:t.tableColumnsWithdraw,data:t.tableWithdraw,loading:t.loading}}),t._v(" "),i("div",{attrs:{id:"pages"}},[i("div",{staticStyle:{float:"right"}},[i("Page",{staticClass:"pages_a",attrs:{total:t.transaction.total,current:t.transaction.page+1},on:{"on-change":t.changePage}})],1)])],1)])])])])])]),t._v(" "),i("Modal",{attrs:{width:"450"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[i("p",{attrs:{slot:"header"},slot:"header"},[t._v("\n      "+t._s(t.$t("swap.tip"))+"\n    ")]),t._v(" "),i("Form",{ref:"formInline",staticClass:"withdraw-form-inline",attrs:{model:t.formInline,inline:""}},[i("FormItem",{attrs:{prop:"code"}},[i("Input",{attrs:{type:"text",placeholder:t.$t("uc.regist.smscode")},model:{value:t.formInline.code,callback:function(e){t.$set(t.formInline,"code",e)},expression:"formInline.code"}}),t._v(" "),i("input",{attrs:{id:"sendCode",type:"Button",disabled:t.codeIsSending},domProps:{value:t.sendcodeValue},on:{click:function(e){return t.sendCode()}}})],1),t._v(" "),i("FormItem",[i("Input",{attrs:{type:"password",placeholder:t.$t("otc.chat.msg7")},model:{value:t.formInline.fundpwd,callback:function(e){t.$set(t.formInline,"fundpwd",e)},expression:"formInline.fundpwd"}})],1)],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("span",{staticStyle:{"margin-right":"50px"},on:{click:t.cancel}},[t._v(t._s(t.$t("common.close")))]),t._v(" "),i("span",{staticStyle:{background:"#f0ac19",color:"#fff",width:"80px","border-radius":"30px",display:"inline-block","text-align":"center",height:"30px","line-height":"30px"},on:{click:t.ok}},[t._v(t._s(t.$t("common.ok")))])])],1)],1)},staticRenderFns:[]};var n=i("VU/8")(s,a,!1,function(t){i("x+yW"),i("feMJ"),i("mdJb")},"data-v-0d147b28",null);e.default=n.exports},feMJ:function(t,e){},mdJb:function(t,e){},"x+yW":function(t,e){}});